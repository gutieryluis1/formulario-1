<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Formul√°rio</title>
</head>

<body>
    <div class="content">
        <h1>Conhecendo Voc√™üòÄ</h1>
        <form id="form">
            <div>
                <input type="text" placeholder="Digite seu nome" class="inputs required" oninput="nameValidate()">
                <span class="span-required">Nome deve ter no m√≠nimo 3 caracteres</span>
            </div>
            <div>
                <input type="email" placeholder="Digite seu melhor e-mail" class="inputs required"
                    oninput="emailValidate()">
                <span class="span-required">Digite um e-mail v√°lido</span>
            </div>
            <div>
                <input type="password" placeholder="senha" class="inputs required" oninput="mainPasswordValidate()">
                <span class="span-required">Digite uma senha com no m√≠nimo 8 caracteres</span>
            </div>
            <div>
                <input type="password" placeholder="repita a sua senha" class="inputs required"
                    oninput="passwordConfirm()">
                <span class="span-required">Senhas devem ser compat√≠veis</span>
            </div>
            <textarea class="inputs" name="descricao" id="descricao" cols="25" rows="10"
                placeholder="Fale um pouco sobre voc√™..."></textarea>
            <p>Sexo:</p>
            <div class="box-select">
                <div>
                    <input type="radio" name="sexo" id="m" value="m">
                    <label for="m">Masculino</label>
                </div>
                <div>
                    <input type="radio" name="sexo" id="f" value="f">
                    <label for="f">Feminino</label>
                </div>
                <div>
                    <input type="radio" name="sexo" id="o" value="o">
                    <label for="o">Outro</label>
                </div>
            </div>
            <p>Quais s√£o as suas experi√™ncias?</p>
            <div class="box-select">
                <div>
                    <input type="checkbox" name="experiencias" id="html" value="html">
                    <label for="html">HTML</label>
                </div>
                <div>
                    <input type="checkbox" name="experiencias" id="css" value="css">
                    <label for="css">CSS</label>
                </div>
                <div>
                    <input type="checkbox" name="experiencias" id="javascript" value="javascript">
                    <label for="html">Javascript</label>
                </div>
                <div>
                    <input type="checkbox" name="experiencias" id="sql" value="sql">
                    <label for="sql">SQL</label>
                </div>
            </div>
            <button type="submit">Enviar</button>
        </form>
    </div>
</body>
<script>

    const form = document.getElementById('form')
    const campos = document.querySelectorAll('.required')
    const spans = document.querySelectorAll('.span-required')
    const emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
    //fun√ß√£o de valida√ß√£o de todas as informa√ß√µes para n√£o deixar nenhuma info faltando
    form.addEventListener('submit', (event) => {
        event.preventDefault()
        nameValidate()
        emailValidate()
        mainPasswordValidate()
        passwordConfirm()
    })
    //fun√ß√£o que vai setar os erros de valida√ß√£o na tela com a mudan√ßa de CSS
    function setError(index) {
        campos[index].style.border = '2px solid #e63636'
        spans[index].style.display = 'block';
    }
    //fun√ß√£o que vai voltar ao normal todas as funcionalidades com as valida√ß√µes corretas
    function removeError(index) {
        campos[index].style.border = '';
        spans[index].style.display = 'none';
    }


    //Fun√ß√£o que valida o nome: se o item 0 do array campos receber valores menores que 3, ative o "setError"      
    function nameValidate() {
        if (campos[0].value.length < 3) {
            setError(0)
        }
        else {
            removeError(0)
        }
    }
    //fun√ß√£o que valida o email. Ele faz um teste que verifica se seu email tem algum caractere na const emailRegex que caracteriza um email v√°lido
    function emailValidate() {
        if (!emailRegex.test(campos[1].value)) {
            setError(1)
        }
        else {
            removeError(1)
        }
    }
    //fun√ß√£o que valida senha. Basicamente se o item 2 do array campo conter valor menor que 8, ele dispoara a fun√ß√£o setError(2)
    function mainPasswordValidate() {
        if (campos[2].value.length < 8) {
            setError(2)
        }
        else {
            removeError(2)
            passwordConfirm()//fun√ß√£o criada assim que foi validado a senha
        }
    }
    //fun√ß√£o que garante que as senhas ser√£o iguais.
    function passwordConfirm() {
        if (campos[3].value != campos[2].value) {
            setError(3)
        }
        else {
            removeError(3)
        }
    }
</script>

</html>